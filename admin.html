<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body{background:#050505;color:#0ff;font-family:monospace;padding:20px}
input,button{width:100%;padding:10px;margin:8px 0;background:#111;color:#0ff;border:1px solid #0ff;border-radius:5px}
.channel-item{background:#111;padding:10px;margin:8px 0;border:1px solid #0ff;border-radius:5px;display:flex;justify-content:space-between}
.channel-item button{width:auto;margin-left:5px;background:#ff0;color:#000;border:none;padding:5px 8px;border-radius:4px;cursor:pointer}
</style>
</head>
<body>

<h2>Admin Login</h2>
<input id="pin" type="password" placeholder="PIN">
<button id="loginBtn">Login</button>

<div id="panel" style="display:none">
  <h3>Add Channel</h3>
  <input id="name" placeholder="Channel Name">
  <input id="url" placeholder="Stream URL (m3u8)">
  <button id="saveBtn">Save</button>

  <h3>Channels List</h3>
  <div id="channelList"></div>
</div>

<script>
const ADMIN_PIN="4321";

// login
document.getElementById("loginBtn").onclick = function(){
  const pin = document.getElementById("pin");
  const panel = document.getElementById("panel");
  if(pin.value === ADMIN_PIN){
    panel.style.display="block";
    pin.style.display="none";
    this.style.display="none";
    renderChannels();
  } else {
    alert("Wrong PIN");
  }
}

// save
document.getElementById("saveBtn").onclick = function(){
  const name = document.getElementById("name").value;
  const url = document.getElementById("url").value;
  if(!name || !url){ alert("Fill all fields!"); return; }

  const arr = JSON.parse(localStorage.getItem("channels") || "[]");
  arr.push({name, src: url});
  localStorage.setItem("channels", JSON.stringify(arr));

  document.getElementById("name").value = "";
  document.getElementById("url").value = "";

  renderChannels();
  alert("Channel Saved");
}

// render channels
function renderChannels(){
  const listDiv = document.getElementById("channelList");
  const arr = JSON.parse(localStorage.getItem("channels") || "[]");
  listDiv.innerHTML = "";
  arr.forEach((ch, index)=>{
    const div = document.createElement("div");
    div.className = "channel-item";
    div.innerHTML = `
      <span>${ch.name} | ${ch.src}</span>
      <span>
        <button onclick="editChannel(${index})">Edit</button>
        <button onclick="deleteChannel(${index})">Delete</button>
      </span>
    `;
    listDiv.appendChild(div);
  });
}

// edit
function editChannel(index){
  const arr = JSON.parse(localStorage.getItem("channels") || "[]");
  document.getElementById("name").value = arr[index].name;
  document.getElementById("url").value = arr[index].src;
  arr.splice(index, 1);
  localStorage.setItem("channels", JSON.stringify(arr));
  renderChannels();
}

// delete
function deleteChannel(index){
  const arr = JSON.parse(localStorage.getItem("channels") || "[]");
  if(confirm("Delete this channel?")){
    arr.splice(index, 1);
    localStorage.setItem("channels", JSON.stringify(arr));
    renderChannels();
  }
}
</script>

</body>
</html>
